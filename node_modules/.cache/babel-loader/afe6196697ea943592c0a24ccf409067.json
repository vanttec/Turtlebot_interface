{"ast":null,"code":"var _jsxFileName = \"/home/edison/react_projects/ros-app/src/components/app.js\";\nimport * as React from 'react';\nimport logo from \"../logo.svg\";\nimport Roboboat from './Roboboat';\nimport ROSLIB from 'roslib';\n\n//Inicializa variables en constructor(state)\nclass App extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      connected: false,\n      error: undefined,\n      url: \"ws://localhost:9090\"\n    };\n    this.ros = null;\n\n    this.handleChange = event => {\n      this.setState({\n        url: event.target.value\n      });\n    };\n\n    this.handleConnect = () => {\n      //Intenta conectar\n      try {\n        this.ros = new ROSLIB.Ros({\n          url: this.state.url\n        }); //Si se conecta, actualizar variable connected\n\n        if (this.ros) this.ros.on('connection', () => {\n          this.setState({\n            connected: true\n          });\n        }); //No se conecta, desplegar error y actualizar variable \"undefined\" the error en state\n\n        if (this.ros) this.ros.on('error', error => {\n          console.log(error);\n          this.setState({\n            error: /*#__PURE__*/React.createElement(\"div\", {\n              style: {\n                color: \"rgb(161, 55, 55)\",\n                margin: 5\n              },\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 46,\n                columnNumber: 13\n              }\n            }, /*#__PURE__*/React.createElement(\"div\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 47,\n                columnNumber: 15\n              }\n            }, \"Unable to establish connection to rosbridge server\"))\n          });\n        });\n      } catch (e) {\n        console.log(\"Failed to create ros instance\", e);\n        this.setState({\n          error: /*#__PURE__*/React.createElement(\"div\", {\n            style: {\n              color: \"rgb(161, 55, 55)\",\n              margin: 5\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 56,\n              columnNumber: 11\n            }\n          }, /*#__PURE__*/React.createElement(\"div\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 13\n            }\n          }, e.message))\n        });\n      }\n    };\n  }\n\n  render() {\n    var x = \"\";\n\n    if (this.state.connected) {\n      console.log('You are in!');\n      x = /*#__PURE__*/React.createElement(\"div\", {\n        className: \"App\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Roboboat, {\n        ros: this.ros,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }\n      }));\n    } else {\n      x = /*#__PURE__*/React.createElement(\"div\", {\n        className: \"App\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"AppHeader\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: logo,\n        className: \"Logo\",\n        alt: \"logo\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 19\n        }\n      }, \"Welcome to Roboboat interface\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"AppMain\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 19\n        }\n      }, \"Connect to url\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"url\",\n        name: \"url\",\n        value: this.state.url,\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        onClick: this.handleConnect,\n        value: \"Connect\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 19\n        }\n      }, \"Connect\"), this.state.error));\n    }\n\n    return x;\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/edison/react_projects/ros-app/src/components/app.js"],"names":["React","Roboboat","ROSLIB","App","Component","state","connected","error","undefined","url","ros","handleChange","event","setState","target","value","handleConnect","Ros","on","console","log","color","margin","e","message","render","x","logo"],"mappings":"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","sourcesContent":["// @flow\nimport * as React from 'react';\nimport logo from '../logo.svg';\nimport Roboboat from './Roboboat'\nimport ROSLIB from'roslib';\ntype Props = {\n\n}\n//Declara tipo de dato en state de App\ntype State = {\n  connected: boolean,\n  error: ?React.Element<*>,\n  url: string,\n}\n//Inicializa variables en constructor(state)\nclass App extends React.Component<Props, State> {\n  state = {\n    connected: false,\n    error: undefined,\n    url: \"ws://localhost:9090\",\n  }\n\n  ros = null\n//Cuando se quiera cambiar la cariable url string\n  handleChange = (event: {target: {value: string}}) => {\n    this.setState({url: event.target.value});\n  }\n\n  handleConnect = () => {\n    //Intenta conectar\n    try {\n      this.ros = new ROSLIB.Ros({\n          url : this.state.url,\n        });\n      //Si se conecta, actualizar variable connected\n      if (this.ros) this.ros.on('connection', () => {\n        this.setState({\n            connected: true,\n        });\n      });\n      //No se conecta, desplegar error y actualizar variable \"undefined\" the error en state\n      if (this.ros) this.ros.on('error', (error) => {\n        console.log(error)\n        this.setState({\n          error: (\n            <div style={{color: \"rgb(161, 55, 55)\", margin: 5}}>\n              <div>Unable to establish connection to rosbridge server</div>\n            </div>\n          ),\n        });\n      });\n    } catch (e) {\n      console.log(\"Failed to create ros instance\", e)\n      this.setState({\n        error: (\n          <div style={{color: \"rgb(161, 55, 55)\", margin: 5}}>\n            <div>{e.message}</div>\n          </div>\n        ),\n      });\n    }\n  }\n\n  render() {\n    var x = \"\";\n    if (this.state.connected) {\n        console.log('You are in!')\n        x = (\n          <div className=\"App\">\n            <Roboboat ros={this.ros} />\n          </div>\n      );\n    } else {\n        x = (\n            <div className=\"App\">\n                <div className=\"AppHeader\">\n                  <img src={logo} className=\"Logo\" alt=\"logo\" />\n                  <h2>Welcome to Roboboat interface</h2>\n                </div>\n                <div className=\"AppMain\">\n                  <p>Connect to url</p>\n                  <input type=\"url\" name=\"url\" value={this.state.url} onChange={this.handleChange}/>\n                  <button onClick={this.handleConnect} value=\"Connect\">\n                    Connect\n                  </button>\n                  {this.state.error}\n                </div>\n            </div>\n\n        );\n    }\n\n    return x;\n  }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}